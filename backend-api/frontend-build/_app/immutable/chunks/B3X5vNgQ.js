import{M as b,N as k,O as A,P as E,Q as g,R as M,e as i,S as m,h as d,T as N,U as L,V as T,W as q,X as I,Y as w,Z as O,t as R,_ as U}from"./BcDtKVn4.js";function Y(e,r,a){var t=e==null?"":""+e;return t===""?null:t}function B(e,r){return e==null?null:String(e)}function S(e,r,a=!1){if(e.multiple){if(r==null)return;if(!E(r))return g();for(var t of e.options)t.selected=r.includes(o(t));return}for(t of e.options){var s=o(t);if(M(s,r)){t.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function V(e){var r=new MutationObserver(()=>{S(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),A(()=>{r.disconnect()})}function D(e,r,a=r){var t=new WeakSet,s=!0;b(e,"change",l=>{var n=l?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(n),o);else{var f=e.querySelector(n)??e.querySelector("option:not([disabled])");u=f&&o(f)}a(u),i!==null&&t.add(i)}),k(()=>{var l=r();if(e===document.activeElement){var n=m??i;if(t.has(n))return}if(S(e,l,s),s&&l===void 0){var u=e.querySelector(":checked");u!==null&&(l=o(u),a(l))}e.__value=l,s=!1}),V(e)}function o(e){return"__value"in e?e.__value:e.value}const W=Symbol("is custom element"),x=Symbol("is html");function F(e){if(d){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var t=e.value;h(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var s=e.checked;h(e,"checked",null),e.checked=s}}};e.__on_r=a,N(a),L()}}function h(e,r,a,t){var s=C(e);d&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=a)&&(r==="loading"&&(e[I]=a),a==null?e.removeAttribute(r):typeof a!="string"&&H(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function C(e){return e.__attributes??(e.__attributes={[W]:e.nodeName.includes("-"),[x]:e.namespaceURI===T})}var y=new Map;function H(e){var r=e.getAttribute("is")||e.nodeName,a=y.get(r);if(a)return a;y.set(r,a=[]);for(var t,s=e,l=Element.prototype;l!==s;){t=w(s);for(var n in t)t[n].set&&a.push(n);s=q(s)}return a}function G(e,r,a=r){var t=new WeakSet;b(e,"input",async s=>{var l=s?e.defaultValue:e.value;if(l=v(e)?_(l):l,a(l),i!==null&&t.add(i),await O(),l!==(l=r())){var n=e.selectionStart,u=e.selectionEnd,f=e.value.length;if(e.value=l??"",u!==null){var c=e.value.length;n===u&&u===f&&c>f?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=n,e.selectionEnd=Math.min(u,c))}}}),(d&&e.defaultValue!==e.value||R(r)==null&&e.value)&&(a(v(e)?_(e.value):e.value),i!==null&&t.add(i)),U(()=>{var s=r();if(e===document.activeElement){var l=m??i;if(t.has(l))return}v(e)&&s===_(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function v(e){var r=e.type;return r==="number"||r==="range"}function _(e){return e===""?null:+e}export{D as a,G as b,B as c,F as r,h as s,Y as t};
