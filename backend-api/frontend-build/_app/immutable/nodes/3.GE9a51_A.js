import{f as g,a as f}from"../chunks/Bu6yjzp-.js";import{o as wt}from"../chunks/DeF66miZ.js";import{h as $e,B as mt,C as a,D as xt,F as s,G as o,x as t,I as n,J as e,n as et,K as $}from"../chunks/BcDtKVn4.js";import{d as yt,s as Q}from"../chunks/BqWBJ0nJ.js";import{i as S}from"../chunks/BkkIdlLT.js";import{t as kt,r as j,b as N,a as B}from"../chunks/B3X5vNgQ.js";import{g as Pt}from"../chunks/BT8tCvvr.js";function tt(P,He,A,p,h,i){var v=P.__className;if($e||v!==A||v===void 0){var w=kt(A);(!$e||w!==P.getAttribute("class"))&&(w==null?P.removeAttribute("class"):P.className=w),P.__className=A}return i}var Ct=g('<div class="bg-slate-800 rounded-xl p-8 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div> <p class="text-slate-400 mt-4">Loading settings...</p></div>'),St=g('<div class="bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg mb-6"> </div>'),jt=g('<div class="bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-6"> </div>'),Nt=g('<div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div>'),At=g('<div><label class="block text-slate-300 mb-2">Username</label> <input type="text" placeholder="admin" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password <span class="text-sm text-slate-400">(leave blank to keep current)</span></label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <!>',1),Tt=g('<button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Change Password</button>'),Bt=g('<div class="space-y-4"><div><label class="block text-slate-300 mb-2">Current Password</label> <input type="password" placeholder="Enter current password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password</label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div class="flex gap-3"><button class="flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button> <button class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Cancel</button></div></div>'),Ft=g('<div class="bg-slate-800 rounded-xl p-6"><h2 class="text-xl font-semibold text-white mb-4">Change Password</h2> <!></div>'),Mt=g('<!> <!> <div class="bg-slate-800 rounded-xl p-6 mb-6"><h2 class="text-xl font-semibold text-white mb-4">Authentication</h2> <div class="space-y-4"><div class="flex items-center justify-between"><label class="text-slate-300"><span class="font-medium">Require Authentication</span> <p class="text-sm text-slate-400 mt-1">When enabled, users must log in to access the app</p></label> <button><span></span></button></div> <!> <button class="w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button></div></div> <!> <div class="bg-slate-800 rounded-xl p-6"><h2 class="text-xl font-semibold text-white mb-4">Default Presets</h2> <p class="text-sm text-slate-400 mb-4">Set default values that will load automatically when the app starts</p> <div class="space-y-4"><div><label class="block text-slate-300 mb-2">Default Target Size (MB)</label> <input type="number" min="1" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-slate-300 mb-2">Video Codec</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>AV1 (Best Quality)</option><option>HEVC (H.265)</option><option>H.264 (Most Compatible)</option></select></div> <div><label class="block text-slate-300 mb-2">Audio Codec</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>Opus (Default)</option><option>AAC</option></select></div> <div><label class="block text-slate-300 mb-2">Speed/Quality Preset</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>P1 (Fastest)</option><option>P2</option><option>P3</option><option>P4</option><option>P5</option><option>P6 (Balanced)</option><option>P7 (Best Quality)</option></select></div> <div><label class="block text-slate-300 mb-2">Audio Bitrate (kbps)</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>64</option><option>96</option><option>128 (Default)</option><option>160</option><option>192</option><option>256</option></select></div> <div><label class="block text-slate-300 mb-2">Container</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>MP4 (Most Compatible)</option><option>MKV</option></select></div> <div><label class="block text-slate-300 mb-2">Tune</label> <select class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:border-blue-500"><option>High Quality (HQ)</option><option>Low Latency</option><option>Ultra Low Latency</option><option>Lossless</option></select></div></div> <button class="w-full px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button></div></div>',1),Dt=g('<div class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8"><div class="max-w-2xl mx-auto"><div class="flex items-center justify-between mb-8"><h1 class="text-3xl font-bold text-white">Settings</h1> <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">‚Üê Back to Home</button></div> <!></div></div>');function Jt(P,He){mt(He,!0);let A=n(!0),p=n(!1),h=n(""),i=n(""),v=n(!1),w=n("admin"),b=n(""),U=n(""),J=n(!1),T=n(""),y=n(""),F=n(""),M=n(25),V=n("av1_nvenc"),K=n("libopus"),R=n("p6"),z=n(128),G=n("mp4"),I=n("hq");async function at(){try{const[r,d]=await Promise.all([fetch("/api/settings/auth"),fetch("/api/settings/presets")]);if(r.ok){const u=await r.json();e(v,u.auth_enabled,!0),e(w,u.auth_user||"admin",!0)}if(d.ok){const u=await d.json();e(M,u.target_mb,!0),e(V,u.video_codec,!0),e(K,u.audio_codec,!0),e(R,u.preset,!0),e(z,u.audio_kbps,!0),e(G,u.container,!0),e(I,u.tune,!0)}}catch{e(i,"Failed to load settings")}finally{e(A,!1)}}async function st(){if(e(i,""),e(h,""),t(v)&&!t(w).trim()){e(i,"Username is required when authentication is enabled");return}if(t(v)&&t(b)&&t(b)!==t(U)){e(i,"Passwords do not match");return}if(t(v)&&t(b)&&t(b).length<4){e(i,"Password must be at least 4 characters");return}e(p,!0);try{const r={auth_enabled:t(v),auth_user:t(w).trim()};t(v)&&t(b)&&(r.auth_pass=t(b));const d=await fetch("/api/settings/auth",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(d.ok){const u=await d.json();e(h,u.message||"Settings saved successfully!",!0),e(b,""),e(U,""),t(v)||setTimeout(()=>{window.location.href="/"},1500)}else{const u=await d.json();e(i,u.detail||"Failed to save settings",!0)}}catch{e(i,"Failed to save settings")}finally{e(p,!1)}}async function ot(){if(e(i,""),e(h,""),t(M)<1){e(i,"Target size must be at least 1 MB");return}e(p,!0);try{const r=await fetch("/api/settings/presets",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({target_mb:t(M),video_codec:t(V),audio_codec:t(K),preset:t(R),audio_kbps:t(z),container:t(G),tune:t(I)})});if(r.ok){const d=await r.json();e(h,d.message||"Default presets saved successfully!",!0)}else{const d=await r.json();e(i,d.detail||"Failed to save presets",!0)}}catch{e(i,"Failed to save presets")}finally{e(p,!1)}}async function lt(){if(e(i,""),e(h,""),!t(T)||!t(y)){e(i,"All password fields are required");return}if(t(y)!==t(F)){e(i,"New passwords do not match");return}if(t(y).length<4){e(i,"Password must be at least 4 characters");return}e(p,!0);try{const r=await fetch("/api/settings/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:t(T),new_password:t(y)})});if(r.ok)e(h,"Password changed successfully!"),e(T,""),e(y,""),e(F,""),e(J,!1);else{const d=await r.json();e(i,d.detail||"Failed to change password",!0)}}catch{e(i,"Failed to change password")}finally{e(p,!1)}}wt(()=>{at()});var ee=Dt(),Le=s(ee),te=s(Le),rt=a(s(te),2);rt.__click=()=>Pt("/"),o(te);var it=a(te,2);{var nt=r=>{var d=Ct();f(r,d)},dt=r=>{var d=Mt(),u=et(d);{var ut=l=>{var c=St(),m=s(c,!0);o(c),$(()=>Q(m,t(h))),f(l,c)};S(u,l=>{t(h)&&l(ut)})}var qe=a(u,2);{var vt=l=>{var c=jt(),m=s(c,!0);o(c),$(()=>Q(m,t(i))),f(l,c)};S(qe,l=>{t(i)&&l(vt)})}var ae=a(qe,2),Ee=a(s(ae),2),se=s(Ee),W=a(s(se),2);W.__click=()=>e(v,!t(v));var ct=s(W);o(W),o(se);var Oe=a(se,2);{var pt=l=>{var c=At(),m=et(c),Z=a(s(m),2);j(Z),o(m);var D=a(m,2),x=a(s(D),2);j(x),o(D);var k=a(D,2);{var H=_=>{var C=Nt(),L=a(s(C),2);j(L),o(C),N(L,()=>t(U),q=>e(U,q)),f(_,C)};S(k,_=>{t(b)&&_(H)})}N(Z,()=>t(w),_=>e(w,_)),N(x,()=>t(b),_=>e(b,_)),f(l,c)};S(Oe,l=>{t(v)&&l(pt)})}var X=a(Oe,2);X.__click=st;var bt=s(X,!0);o(X),o(Ee),o(ae);var Qe=a(ae,2);{var _t=l=>{var c=Ft(),m=a(s(c),2);{var Z=x=>{var k=Tt();k.__click=()=>e(J,!0),f(x,k)},D=x=>{var k=Bt(),H=s(k),_=a(s(H),2);j(_),o(H);var C=a(H,2),L=a(s(C),2);j(L),o(C);var q=a(C,2),Ye=a(s(q),2);j(Ye),o(q);var Ze=a(q,2),E=s(Ze);E.__click=lt;var gt=s(E,!0);o(E);var ht=a(E,2);ht.__click=()=>{e(J,!1),e(T,""),e(y,""),e(F,"")},o(Ze),o(k),$(()=>{E.disabled=t(p),Q(gt,t(p)?"Changing...":"Change Password")}),N(_,()=>t(T),O=>e(T,O)),N(L,()=>t(y),O=>e(y,O)),N(Ye,()=>t(F),O=>e(F,O)),f(x,k)};S(m,x=>{t(J)?x(D,!1):x(Z)})}o(c),f(l,c)};S(Qe,l=>{t(v)&&l(_t)})}var Ue=a(Qe,2),Je=a(s(Ue),4),oe=s(Je),Ve=a(s(oe),2);j(Ve),o(oe);var le=a(oe,2),re=s(le),ie=a(s(re),2),ne=s(ie);ne.value=ne.__value="av1_nvenc";var de=a(ne);de.value=de.__value="hevc_nvenc";var Ke=a(de);Ke.value=Ke.__value="h264_nvenc",o(ie),o(re);var ue=a(re,2),ve=a(s(ue),2),ce=s(ve);ce.value=ce.__value="libopus";var Re=a(ce);Re.value=Re.__value="aac",o(ve),o(ue);var pe=a(ue,2),be=a(s(pe),2),_e=s(be);_e.value=_e.__value="p1";var fe=a(_e);fe.value=fe.__value="p2";var ge=a(fe);ge.value=ge.__value="p3";var he=a(ge);he.value=he.__value="p4";var we=a(he);we.value=we.__value="p5";var me=a(we);me.value=me.__value="p6";var ze=a(me);ze.value=ze.__value="p7",o(be),o(pe);var xe=a(pe,2),ye=a(s(xe),2),ke=s(ye);ke.value=ke.__value=64;var Pe=a(ke);Pe.value=Pe.__value=96;var Ce=a(Pe);Ce.value=Ce.__value=128;var Se=a(Ce);Se.value=Se.__value=160;var je=a(Se);je.value=je.__value=192;var Ge=a(je);Ge.value=Ge.__value=256,o(ye),o(xe);var Ne=a(xe,2),Ae=a(s(Ne),2),Te=s(Ae);Te.value=Te.__value="mp4";var Ie=a(Te);Ie.value=Ie.__value="mkv",o(Ae),o(Ne);var We=a(Ne,2),Be=a(s(We),2),Fe=s(Be);Fe.value=Fe.__value="hq";var Me=a(Fe);Me.value=Me.__value="ll";var De=a(Me);De.value=De.__value="ull";var Xe=a(De);Xe.value=Xe.__value="lossless",o(Be),o(We),o(le);var Y=a(le,2);Y.__click=ot;var ft=s(Y,!0);o(Y),o(Je),o(Ue),$(()=>{tt(W,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${t(v)?"bg-blue-600":"bg-slate-600"}`),tt(ct,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${t(v)?"translate-x-6":"translate-x-1"}`),X.disabled=t(p),Q(bt,t(p)?"Saving...":"Save Settings"),Y.disabled=t(p),Q(ft,t(p)?"Saving...":"Save Default Presets")}),N(Ve,()=>t(M),l=>e(M,l)),B(ie,()=>t(V),l=>e(V,l)),B(ve,()=>t(K),l=>e(K,l)),B(be,()=>t(R),l=>e(R,l)),B(ye,()=>t(z),l=>e(z,l)),B(Ae,()=>t(G),l=>e(G,l)),B(Be,()=>t(I),l=>e(I,l)),f(r,d)};S(it,r=>{t(A)?r(nt):r(dt,!1)})}o(Le),o(ee),f(P,ee),xt()}yt(["click"]);export{Jt as component};
