import{f,a as p}from"../chunks/CmtLLwtQ.js";import{o as xe}from"../chunks/BdtXj2Mm.js";import{h as ae,B as ye,C as a,D as ke,F as s,G as r,x as e,I as u,J as t,n as se,K as L}from"../chunks/YSCrJKMk.js";import{d as Pe,s as M}from"../chunks/BBqetA9d.js";import{i as C}from"../chunks/UYjQCPtO.js";import{t as Ce,r as F,b as A}from"../chunks/B9BYu2eO.js";import{g as Ne}from"../chunks/B8bYzt6L.js";function re(y,V,N,h,k,o){var i=y.__className;if(ae||i!==N||i===void 0){var g=Ce(N);(!ae||g!==y.getAttribute("class"))&&(g==null?y.removeAttribute("class"):y.className=g),y.__className=N}return o}var Se=f('<div class="bg-slate-800 rounded-xl p-8 text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"></div> <p class="text-slate-400 mt-4">Loading settings...</p></div>'),je=f('<div class="bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg mb-6"> </div>'),Fe=f('<div class="bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-6"> </div>'),Ae=f('<div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div>'),Te=f('<div><label class="block text-slate-300 mb-2">Username</label> <input type="text" placeholder="admin" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password <span class="text-sm text-slate-400">(leave blank to keep current)</span></label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <!>',1),Ee=f('<button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Change Password</button>'),qe=f('<div class="space-y-4"><div><label class="block text-slate-300 mb-2">Current Password</label> <input type="password" placeholder="Enter current password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">New Password</label> <input type="password" placeholder="Enter new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div><label class="block text-slate-300 mb-2">Confirm New Password</label> <input type="password" placeholder="Confirm new password" class="w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-blue-500"/></div> <div class="flex gap-3"><button class="flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button> <button class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">Cancel</button></div></div>'),Je=f('<div class="bg-slate-800 rounded-xl p-6"><h2 class="text-xl font-semibold text-white mb-4">Change Password</h2> <!></div>'),Oe=f('<!> <!> <div class="bg-slate-800 rounded-xl p-6 mb-6"><h2 class="text-xl font-semibold text-white mb-4">Authentication</h2> <div class="space-y-4"><div class="flex items-center justify-between"><label class="text-slate-300"><span class="font-medium">Require Authentication</span> <p class="text-sm text-slate-400 mt-1">When enabled, users must log in to access the app</p></label> <button><span></span></button></div> <!> <button class="w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors"> </button></div></div> <!>',1),Ue=f('<div class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8"><div class="max-w-2xl mx-auto"><div class="flex items-center justify-between mb-8"><h1 class="text-3xl font-bold text-white">Settings</h1> <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors">‚Üê Back to Home</button></div> <!></div></div>');function Me(y,V){ye(V,!0);let N=u(!0),h=u(!1),k=u(""),o=u(""),i=u(!1),g=u("admin"),b=u(""),D=u(""),G=u(!1),S=u(""),_=u(""),T=u("");async function le(){try{const l=await fetch("/api/settings/auth");if(l.ok){const c=await l.json();t(i,c.auth_enabled,!0),t(g,c.auth_user||"admin",!0)}}catch{t(o,"Failed to load settings")}finally{t(N,!1)}}async function oe(){if(t(o,""),t(k,""),e(i)&&!e(g).trim()){t(o,"Username is required when authentication is enabled");return}if(e(i)&&e(b)&&e(b)!==e(D)){t(o,"Passwords do not match");return}if(e(i)&&e(b)&&e(b).length<4){t(o,"Password must be at least 4 characters");return}t(h,!0);try{const l={auth_enabled:e(i),auth_user:e(g).trim()};e(i)&&e(b)&&(l.auth_pass=e(b));const c=await fetch("/api/settings/auth",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(c.ok){const j=await c.json();t(k,j.message||"Settings saved successfully!",!0),t(b,""),t(D,""),e(i)||setTimeout(()=>{window.location.href="/"},1500)}else{const j=await c.json();t(o,j.detail||"Failed to save settings",!0)}}catch{t(o,"Failed to save settings")}finally{t(h,!1)}}async function ie(){if(t(o,""),t(k,""),!e(S)||!e(_)){t(o,"All password fields are required");return}if(e(_)!==e(T)){t(o,"New passwords do not match");return}if(e(_).length<4){t(o,"Password must be at least 4 characters");return}t(h,!0);try{const l=await fetch("/api/settings/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:e(S),new_password:e(_)})});if(l.ok)t(k,"Password changed successfully!"),t(S,""),t(_,""),t(T,""),t(G,!1);else{const c=await l.json();t(o,c.detail||"Failed to change password",!0)}}catch{t(o,"Failed to change password")}finally{t(h,!1)}}xe(()=>{le()});var R=Ue(),X=s(R),W=s(X),ne=a(s(W),2);ne.__click=()=>Ne("/"),r(W);var de=a(W,2);{var ce=l=>{var c=Se();p(l,c)},ue=l=>{var c=Oe(),j=se(c);{var be=n=>{var d=je(),w=s(d,!0);r(d),L(()=>M(w,e(k))),p(n,d)};C(j,n=>{e(k)&&n(be)})}var Y=a(j,2);{var ve=n=>{var d=Fe(),w=s(d,!0);r(d),L(()=>M(w,e(o))),p(n,d)};C(Y,n=>{e(o)&&n(ve)})}var z=a(Y,2),Z=a(s(z),2),Q=s(Z),H=a(s(Q),2);H.__click=()=>t(i,!e(i));var pe=s(H);r(H),r(Q);var $=a(Q,2);{var fe=n=>{var d=Te(),w=se(d),K=a(s(w),2);F(K),r(w);var E=a(w,2),m=a(s(E),2);F(m),r(E);var x=a(E,2);{var q=v=>{var P=Ae(),J=a(s(P),2);F(J),r(P),A(J,()=>e(D),O=>t(D,O)),p(v,P)};C(x,v=>{e(b)&&v(q)})}A(K,()=>e(g),v=>t(g,v)),A(m,()=>e(b),v=>t(b,v)),p(n,d)};C($,n=>{e(i)&&n(fe)})}var I=a($,2);I.__click=oe;var he=s(I,!0);r(I),r(Z),r(z);var ge=a(z,2);{var we=n=>{var d=Je(),w=a(s(d),2);{var K=m=>{var x=Ee();x.__click=()=>t(G,!0),p(m,x)},E=m=>{var x=qe(),q=s(x),v=a(s(q),2);F(v),r(q);var P=a(q,2),J=a(s(P),2);F(J),r(P);var O=a(P,2),ee=a(s(O),2);F(ee),r(O);var te=a(O,2),U=s(te);U.__click=ie;var me=s(U,!0);r(U);var _e=a(U,2);_e.__click=()=>{t(G,!1),t(S,""),t(_,""),t(T,"")},r(te),r(x),L(()=>{U.disabled=e(h),M(me,e(h)?"Changing...":"Change Password")}),A(v,()=>e(S),B=>t(S,B)),A(J,()=>e(_),B=>t(_,B)),A(ee,()=>e(T),B=>t(T,B)),p(m,x)};C(w,m=>{e(G)?m(E,!1):m(K)})}r(d),p(n,d)};C(ge,n=>{e(i)&&n(we)})}L(()=>{re(H,1,`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e(i)?"bg-blue-600":"bg-slate-600"}`),re(pe,1,`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e(i)?"translate-x-6":"translate-x-1"}`),I.disabled=e(h),M(he,e(h)?"Saving...":"Save Settings")}),p(l,c)};C(de,l=>{e(N)?l(ce):l(ue,!1)})}r(X),r(R),p(y,R),ke()}Pe(["click"]);export{Me as component};
